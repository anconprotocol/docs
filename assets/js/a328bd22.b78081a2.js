"use strict";(self.webpackChunkancon_docs=self.webpackChunkancon_docs||[]).push([[615],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return u}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=a.createContext({}),s=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=s(e.components);return a.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=s(n),u=r,h=m["".concat(c,".").concat(u)]||m[u]||d[u]||i;return n?a.createElement(h,o(o({ref:t},p),{},{components:n})):a.createElement(h,o({ref:t},p))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=m;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var s=2;s<i;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},2801:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return c},metadata:function(){return s},toc:function(){return p},default:function(){return m}});var a=n(7462),r=n(3366),i=(n(7294),n(3905)),o=["components"],l={sidebar_position:2},c="Using a Verifiable DAG store",s={unversionedId:"api/metadata",id:"api/metadata",isDocsHomePage:!1,title:"Using a Verifiable DAG store",description:"Ancon Protocol Node is an Layer 2, offchain DAG Store with verifiable data. Anyone can use it once they registered a DID with the L2, which will generate a vector commitment proof, if indeed the register exists or not in the merkle tree.",source:"@site/docs/api/metadata.md",sourceDirName:"api",slug:"/api/metadata",permalink:"/docs/api/metadata",editUrl:"https://github.com/anconprotocol/ancon-docs/docs/api/metadata.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"API Reference",permalink:"/docs/api/reference"},next:{title:"Trusted offchain gateways",permalink:"/docs/api/durin"}},p=[{value:"Staking and Validators",id:"staking-and-validators",children:[],level:2},{value:"Onchain metadata",id:"onchain-metadata",children:[{value:"Smart contracts",id:"smart-contracts",children:[],level:3},{value:"Client",id:"client",children:[],level:3}],level:2},{value:"Examples",id:"examples",children:[{value:"Solidity",id:"solidity",children:[],level:3}],level:2},{value:"Metadata JSON Schema",id:"metadata-json-schema",children:[{value:"Example",id:"example",children:[],level:3}],level:2}],d={toc:p};function m(e){var t=e.components,n=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"using-a-verifiable-dag-store"},"Using a Verifiable DAG store"),(0,i.kt)("p",null,"Ancon Protocol Node is an Layer 2, offchain DAG Store with verifiable data. Anyone can use it once they registered a DID with the L2, which will generate a vector commitment proof, if indeed the register exists or not in the merkle tree."),(0,i.kt)("p",null,"Because there is no consensus involved, we can only be sure that it was signed by someone using a DID identifier. To be able to have a more decentralized feature, is recommended to anchor both DID and proofs in a ICS23 Vector Commitment compatible smart contract chain."),(0,i.kt)("p",null,"Once is submitted to a onchain solution, any offchain operation can be properly validated onchain for any proofs."),(0,i.kt)("h2",{id:"staking-and-validators"},"Staking and Validators"),(0,i.kt)("p",null,"Ancon Protocol will implement a smart contract based validator approach, where the incentives will be to batch proofs operations, validate them, and then submit or commit to protocol header updates. Using $ANCON token, validators will be able to stake and obtain a income by supporting the protocol."),(0,i.kt)("h2",{id:"onchain-metadata"},"Onchain metadata"),(0,i.kt)("p",null,"To use DID identifier with onchain metadata:"),(0,i.kt)("h3",{id:"smart-contracts"},"Smart contracts"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Install or place ",(0,i.kt)("inlineCode",{parentName:"li"},"AnconProtocol.sol")),(0,i.kt)("li",{parentName:"ol"},"The NFT Dapp or App will use these calls: ",(0,i.kt)("inlineCode",{parentName:"li"},"verifyProof"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"submitPacketWithProof"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"enrollL2Account")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"updateProtocolHeader"),"."),(0,i.kt)("li",{parentName:"ol"},"Before starting, create a DID account and obtain the CID and username of the DID."),(0,i.kt)("li",{parentName:"ol"},"Execute a hybrid smart contract and send the result as input for the next call."),(0,i.kt)("li",{parentName:"ol"},"Prepare a Packet, which is the cross chain message, fill the packet message with the values returned from node API."),(0,i.kt)("li",{parentName:"ol"},"Use your recently activated DID identifier to sign the message , and send it to  ",(0,i.kt)("inlineCode",{parentName:"li"},"submitPacketWithProof")," for transaction."),(0,i.kt)("li",{parentName:"ol"},"Once proof is submitted to L1, your packet is validated and anchored.")),(0,i.kt)("h3",{id:"client"},"Client"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Use Node API to registerd DIDs."),(0,i.kt)("li",{parentName:"ol"},"Following API requires DID authentication:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Any write DAG operation (JSON or CBOR)"),(0,i.kt)("li",{parentName:"ul"},"Any hybrid smart contract transaction")),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},"Following onchain operations requires gas and protocol fees:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"enrollL2Acccount")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"submitPacketWithProof")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"updateProtocolHeader"))),(0,i.kt)("ol",{start:4},(0,i.kt)("li",{parentName:"ol"},"Verifiable DID with KYC (only Panama) has a KYC cost to verify ID.")),(0,i.kt)("h2",{id:"examples"},"Examples"),(0,i.kt)("h3",{id:"solidity"},"Solidity"),(0,i.kt)("h2",{id:"metadata-json-schema"},"Metadata JSON Schema"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "$schema": "https://json-schema.org/draft/2020-12/schema",\n  "$id": "https://ancon.did.pa/v0/protocol/metadata",\n  "title": "metadata",\n  "description": "Ancon Protocol metadata schema",\n  "type": "object",\n  "properties": {\n      "name": {\n          "type": "string",\n          "description": "Identifies the asset to which this token represents",\n      },\n      "description": {\n          "type": "string",\n          "description": "Describes the asset to which this token represents",\n      },\n      "image": {\n          "type": "string",\n          "description": "A URI pointing to a resource with mime type image/* representing the asset to which this token represents.",\n      },\n      "sources": {\n          "type": "cid array",\n          "description": "Current intellectual property",\n      },\n      "owner": {\n          "type": "string",\n          "description": "The owner is a DID identifier",\n      },\n      "parent": {\n          "type": "cid",\n          "description": "Direct ascendant of the current intellectual property",\n      }\n  },\n  "required": [ "name", "description", "image", "sources" ]\n}\n')),(0,i.kt)("h3",{id:"example"},"Example"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-JavaScript"},'\nconst payload = {\n  "name": "XDV metadata sample",\n  "description": "testing sample",\n  "image": "https://explore.ipld.io/#/explore/QmSnuWmxptJZdLJpKRarxBMS2Ju2oANVrgbr2xWbie9b2D",\n  "sources": [\n    "QmSnuWmxptJZdLJpKRarxBMS2Ju2oANVrgbr2xWbie9b2D",\n    "z8mWaJHXieAVxxLagBpdaNWFEBKVWmMiE",\n    "QmdmQXB2mzChmMeKY47C43LxUdg1NDJ5MWcKMKxDu7RgQm",\n  ],\n};\n\n\n')))}m.isMDXComponent=!0}}]);